:root{
  --bg: #0f1724; /* deep navy */
  --card: linear-gradient(180deg, rgba(47,60,120,0.14), rgba(95,56,140,0.06));
  --accent-1: #2b5cff; /* blue */
  --accent-2: #7b61ff; /* violet */
  --muted: #98a0bf;
  --surface: #0b1020;
  --glass: rgba(255,255,255,0.03);
  --glass-2: rgba(123,97,255,0.06);
  --text: #e6eef8;
  --radius: 10px;
  font-family: 'Noto Sans', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg), #060613 70%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.35;
  padding-bottom:60px;
}

.container{
  max-width:100%;
  margin:0;
  padding:12px;
}

/* Header */
.site-header{
  background:linear-gradient(90deg, rgba(43,92,255,0.08), rgba(123,97,255,0.06));
  border-bottom:1px solid rgba(255,255,255,0.03);
  position:sticky;
  top:0;
  z-index:30;
}
.header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}
.brand{display:flex;align-items:center;gap:12px}
.logo{
  width:72px;
  height:72px;
  max-width:72px;
  max-height:72px;
  border-radius:10px;
  object-fit:contain; /* preserve full image without cropping */
  background:transparent;
  border:0;
  box-shadow:none;
  display:block;
  flex-shrink:0; /* prevent logo from collapsing and overlapping other header elements */
}
.brand h1{margin:0;font-size:18px;letter-spacing:0.4px}
.tag{margin:0;font-size:12px;color:var(--muted)}

/* Preview hero */
.preview-hero{
  background:linear-gradient(90deg, rgba(43,92,255,0.03), rgba(123,97,255,0.02));
  border-bottom:1px solid rgba(255,255,255,0.02);
}
.preview-inner{
  display:flex;
  align-items:center;
  gap:16px;
  position:relative;
  padding:16px 22px;
  min-height:140px;
  overflow:hidden;
}
.preview-thumbs{
  display:flex;
  gap: -12px;
  align-items:center;
  flex: 0 0 auto;
  margin-right:12px;
}
.preview-thumbs img{
  width:120px;
  height:84px;
  object-fit:cover;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 6px 18px rgba(2,6,23,0.6);
  transform: translateX(-18px);
}
.preview-thumbs img:first-child{ transform: translateX(0); }
.preview-thumbs img:nth-child(2){ transform: translateX(-8px); }
.preview-thumbs img:nth-child(3){ transform: translateX(-16px); }
.preview-thumbs img:nth-child(4){ transform: translateX(-24px); }
.preview-thumbs img:nth-child(5){ transform: translateX(-32px); opacity:0.98; }

.preview-title{
  font-size:20px;
  margin:0;
  font-weight:700;
  color:var(--text);
  text-shadow: 0 6px 18px rgba(11,12,20,0.6);
  padding-left:18px;
  flex:1 1 auto;
}

/* Nav */
.nav{display:flex;gap:12px;align-items:center}
.search{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background:transparent;
  color:var(--text);
  min-width:220px;
}
.btn{
  padding:9px 12px;
  border-radius:9px;
  background:transparent;
  color:var(--text);
  border:1px solid rgba(255,255,255,0.04);
  cursor:pointer;
}
.btn.primary{
  background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
  border:0;
  color:white;
}
.btn.ghost{background:transparent}
.btn.icon{padding:6px 8px;font-size:18px}
.profile-btn{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
.profile-avatar{width:30px;height:30px;border-radius:8px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff}
.auth-mini{font-size:13px;color:var(--muted)}

/* Filters */
.filters{margin:18px 0}
.filter-row{display:flex;gap:12px;align-items:center}
.filter-row label{font-size:13px;color:var(--muted)}
.filter-row select{
  margin-left:8px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)
}

/* Compact category chips and sort menu */
.filter-toolbar, .sort-menu{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.chip{
  padding:8px 10px;border-radius:999px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text);cursor:pointer;font-size:13px;
}
.chip[aria-pressed="true"], .chip.active-chip{
  background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:white;border:0;box-shadow:0 8px 24px rgba(43,92,255,0.12);
}

@media (max-width:420px){
  .filter-row{flex-direction:column;align-items:flex-start;gap:8px}
  .filter-toolbar{width:100%;overflow:auto}
  .chip{padding:8px 10px;font-size:13px;white-space:nowrap}
  .sort-menu{margin-left:0}
}

/* Product grid */
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:14px;
}

/* Card */
.card{
  background:var(--glass);
  border:1px solid rgba(255,255,255,0.03);
  padding:12px;
  border-radius:var(--radius);
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:transform .14s ease, box-shadow .14s ease;
  height:100%;                 /* ensure card fills grid cell */
  justify-content:flex-start;  /* keep content stacking; actions will be pushed down by margin:auto */
}
.card:hover{transform:translateY(-6px);box-shadow:0 6px 20px rgba(15,20,36,0.6)}
.card .media{
  height:120px;border-radius:8px;overflow:hidden;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
  display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:14px;
}
.card h3{margin:0;font-size:15px}
.meta{display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted)}
.price{font-weight:700;color:var(--text)}
/* ensure action row stays at the bottom of the card */
.actions{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  margin-top:auto; /* push actions to the bottom */
}
.tag-pill{padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px;color:var(--muted)}

/* Modal */
.modal{
  position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(2,6,23,0.6),rgba(2,6,23,0.8));
  z-index:60;padding:20px;
}
.modal[aria-hidden="false"]{display:flex}
.modal-panel{
  width:100%;
  max-width:100%;
  background:linear-gradient(180deg,#07102a 0%, #071026 100%);
  border-radius:14px;
  padding:12px;
  border:1px solid rgba(255,255,255,0.04);
}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:8px 6px}
.modal-body{max-height:52vh;overflow:auto;padding:8px}
.modal-footer{display:flex;align-items:center;justify-content:space-between;padding:8px 6px;border-top:1px solid rgba(255,255,255,0.02)}
.cart-item{display:flex;gap:12px;padding:8px;border-radius:8px;margin-bottom:8px;background:rgba(255,255,255,0.02)}
.cart-item .thumb{width:72px;height:48px;background:rgba(255,255,255,0.02);border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
.item-info{flex:1}
.qty{display:flex;gap:6px;align-items:center;margin-top:6px}
.qty button{padding:6px;border-radius:6px;border:0;background:rgba(255,255,255,0.03);color:var(--text);cursor:pointer}

/* Toast */
.toast{
  position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:white;padding:10px 14px;border-radius:10px;box-shadow:0 8px 30px rgba(11,12,20,0.6);display:none;z-index:70;
}

/* Info */
.info{margin-top:22px;padding:14px;border-radius:12px;background:linear-gradient(90deg, rgba(43,92,255,0.03), rgba(123,97,255,0.02));border:1px solid rgba(255,255,255,0.02)}

/* Responsive */
@media (max-width:640px){
  .header-inner{flex-direction:column;align-items:flex-start;gap:10px}
  .search{width:100%}
  .brand h1{font-size:16px}
  .preview-inner{flex-direction:column;align-items:flex-start;gap:12px;min-height:120px;padding:12px}
  .preview-thumbs{order:2;display:flex;gap:8px;overflow:hidden}
  .preview-thumbs img{width:84px;height:56px;transform:none;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
  .preview-title{order:1;font-size:18px;padding-left:0}
}

/* Mobile adjustments for small devices (improved touch, layout and single-screen fit) */
@media (max-width:420px){
  :root{
    --radius:8px;
  }
  .container{
    padding:12px;
    max-width:100%;
  }
  /* make more room at bottom for floating UI */
  body{padding-bottom:68px;}

  /* Lower the sticky header slightly so it sits below the top edge */
  .site-header{top:12px}
  /* Reduced header sizing for tighter mobile fit */
  .header-inner{padding:6px 0;gap:6px}
  .logo{width:40px;height:40px}
  .brand h1{font-size:12px;margin-top:0}
  .tag{font-size:11px;color:var(--muted);display:none} /* hide subtitle to save space */
  .nav{width:100%;display:flex;flex-wrap:wrap;gap:6px}
  .search{min-width:0;flex:1 1 100%;padding:8px;border-radius:8px;font-size:13px}
  .btn{padding:8px 10px;min-height:40px;min-width:40px;border-radius:8px;font-size:13px}
  .btn.icon{padding:6px 8px;font-size:15px}
  .profile-avatar{width:30px;height:30px}
  /* Compact preview */
  .preview-inner{min-height:88px;padding:8px;gap:8px}
  .preview-thumbs{gap:6px}
  .preview-thumbs img{width:64px;height:40px}
  .preview-title{font-size:15px}
  .filters{margin:8px 0}
  .filter-row{flex-direction:column;align-items:flex-start;gap:6px}
  .filter-row select{min-width:100%}
  .product-grid{
    grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    gap:8px;
  }
  .card{padding:8px;border-radius:8px}
  .card .media{height:96px}
  .card h3{font-size:13px}
  .meta{font-size:12px}
  .price{font-size:13px}
  .actions{flex-direction:column;align-items:stretch;gap:6px}
  .actions .btn{width:100%}
  .modal-panel{max-width:96%;padding:8px}
  .modal-body{max-height:50vh}
  .toast{left:12px;right:12px;bottom:12px;width:auto;font-size:13px;padding:8px 10px}
  .info{padding:10px}
  /* Ensure preview, main content and header fit one screen height more comfortably */
  main.container{padding:8px 12px}
  /* Increase hit area for favorites floating button and move a bit up */
  #favBtn{padding:10px 12px;right:12px;bottom:88px}
}

/* Themed select for checkout/payment (matches site accents) */
.themed-select{
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
  color: #fff;
  border: 0;
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 14px;
  box-shadow: 0 6px 18px rgba(11,12,20,0.5);
}
/* smaller variant used on mobile */
@media (max-width:420px){
  .themed-select{ padding:8px 10px; border-radius:8px; font-size:13px; }
}

/* Custom Payment Chips */
.payment-chips{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 6px;
}
.payment-chip{
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  border: 1px solid rgba(255,255,255,0.04);
  background: var(--glass);
  color: var(--text);
  transition: all 0.2s ease;
}
.payment-chip.selected{
  background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
  color: white;
  border: 1px solid var(--accent-1);
  box-shadow: 0 4px 12px rgba(43,92,255,0.2);
}
.payment-chip:hover{
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(43,92,255,0.1);
}
@media (max-width:420px){
  .payment-chip{ padding:8px 10px; font-size:13px; }
}
/* Стили для профиля пользователя */
.profile-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  color: var(--text);
  text-decoration: none;
}

.profile-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.profile-avatar {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  color: #fff;
  background-size: cover;
  background-position: center;
}

/* Стили для иконок глаз (если используете feather icons) */
.feather.eye, .feather.eye-off {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
  fill: none;
}

/* Адаптивные стили для мобильных */
@media (max-width: 768px) {
  .profile-btn span {
    display: none;
  }
  
  .profile-btn {
    padding: 6px;
  }
  
  #logoutBtn {
    font-size: 12px;
    padding: 5px 6px;
  }
}

/* Добавим в styles.css или прямо в index.html */
.btn.ghost.active-chip {
  background: rgba(var(--accent-1-rgb), 0.1) !important;
  color: var(--accent-1) !important;
  border-color: var(--accent-1) !important;
}

.btn.ghost[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn.ghost[title] {
  position: relative;
}

.btn.ghost[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  z-index: 1000;
  margin-bottom: 5px;
}