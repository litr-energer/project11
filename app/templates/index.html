<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</title>

  <!-- Favicons -->
  <link rel="icon" href="assets/key-icon.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/key-icon.png">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Simple icon set -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="/app/static/css/styles.css">

  <!-- Import map (no external JS frameworks required, but kept for extensibility) -->
  <script type="importmap">
  {
    "imports": {}
  }
  </script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <img src="nano-banana_20251205_181151_16c0fe00.png" alt="logo" class="logo" onerror="this.style.display='none'">
        <div>
          <h1>–¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</h1>
          <p class="tag">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏ –∏ –≥–∏–¥—ã –ø–æ –∏–≥—Ä–∞–º</p>
        </div>
      </div>

      <nav class="nav">
        <input id="search" class="search" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä Dota 2" />
        <div id="authArea" style="display:flex;gap:8px;align-items:center">
          <div id="userProfile" style="display:none;">
            <button id="profileBtn" class="profile-btn" onclick="location.href='/account.html'">
            <div class="profile-avatar" id="userAvatar"></div>
            <span id="userName"></span>
            </button>
            <button id="logoutBtn" class="btn ghost" style="font-size:13px;padding:6px 8px;">–í—ã–π—Ç–∏</button>
          </div>
          <div id="authButtons" style="display:flex;gap:8px;align-items:center">
            <button id="authBtn" class="btn ghost" onclick="location.href='/auth.html'">–í–æ–π—Ç–∏</button>
            <button id="registerBtn" class="btn primary" onclick="location.href='/auth.html#register'">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          </div>
        </div>
        <button class="btn ghost" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" onclick="location.href='/favorite.html'">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ (<span id="favCount">0</span>)</button>
        <button id="cartBtn" class="btn ghost" onclick="location.href='/cart.html'">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</button>
        <button id="chatBtn" class="btn ghost" onclick="location.href='/chat.html'">–ß–∞—Ç</button>
        <button id="adminBtn" class="btn ghost" title="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å" onclick="location.href='/admin.html'" style="color:#667eea;font-weight:bold;">Admin üîê</button>
      </nav>
    </div>
  </header>

  <!-- Preview hero inserted here -->
  <section class="preview-hero">
    <div class="container preview-inner">
      <div class="preview-thumbs" aria-hidden="true">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/570/header.jpg" alt="Dota 2">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/945360/header.jpg" alt="Among Us">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/870780/header.jpg" alt="Control" onerror="this.src='https://via.placeholder.com/600x200?text=Control'">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg" alt="CS:GO">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/883710/header.jpg" alt="Resident Evil">
      </div>
      <h2 class="preview-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</h2>
    </div>
  </section>

  <main class="container">
    <section class="filters">
      <div class="filter-row">
        <div class="filter-toolbar" id="categoryToolbar" role="toolbar" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏">
          <button class="chip" data-cat="all" aria-pressed="true">–í—Å–µ</button>
          <button class="chip" data-cat="dota2">Dota 2</button>
          <button class="chip" data-cat="fnaf">FNAF</button>
          <button class="chip" data-cat="classic">–ö–ª–∞—Å—Å–∏–∫–∞</button>
          <button class="chip" data-cat="guides">–ì–∞–π–¥—ã</button>
          <button class="chip" data-cat="market">–ú–∞—Ä–∫–µ—Ç</button>
          <button class="chip" data-cat="lore">–õ–æ—Ä</button>
          <button class="chip" data-cat="strategy">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</button>
          <button class="chip" data-cat="guides">–ì–∞–π–¥</button>
          <button class="chip" data-cat="platformer">–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä</button>
          <button class="chip" data-cat="analysis">–ê–Ω–∞–ª–∏–∑</button>
          <button class="chip" data-cat="indie">–ò–Ω–¥–∏</button>
        </div>

        <div style="margin-left:auto;display:flex;align-items:center;gap:8px">
          <label style="font-size:13px;color:var(--muted);margin:0 6px 0 0">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
          <div class="sort-menu" id="sortMenu" role="menu" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
            <button class="chip" data-sort="popular" aria-pressed="true">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
            <button class="chip" data-sort="price-asc">–¶–µ–Ω–∞ ‚Üë</button>
            <button class="chip" data-sort="price-desc">–¶–µ–Ω–∞ ‚Üì</button>
          </div>
        </div>
      </div>
    </section>

    <section id="products" class="product-grid" aria-live="polite">
      <!-- Product cards inserted here by JS -->
    </section>

    <!-- Marketplace: user-created listings -->
    <section id="marketplace" class="info" style="margin-top:18px;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <h2 style="margin:0">–ú–∞—Ä–∫–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π</h2>
        <button id="openListForm" class="btn ghost">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–Ω–∏–≥—É</button>
      </div>

      <div id="listingForm" style="display:none;margin-top:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)">
        <div style="display:grid;grid-template-columns:1fr 120px;gap:8px;align-items:center">
          <input id="listTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ / –≥–∞–π–¥–∞" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="listPrice" placeholder="–¶–µ–Ω–∞, ‚ÇΩ" type="number" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="listGame" placeholder="–ò–≥—Ä–∞ / —Ç–µ–º–∞ (Dota 2, Silent Hill...)" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="listThumb" placeholder="URL –æ–±–ª–æ–∂–∫–∏" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div style="display:flex;gap:8px">
            <button id="createListing" class="btn primary">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            <button id="cancelListing" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      </div>

      <div id="marketGrid" class="product-grid" style="margin-top:12px;">
        <!-- listings injected by JS -->
      </div>
    </section>

    <!-- Author/Guide submissions (accounts marketplace repurposed to "–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –∏–∑–¥–∞–Ω–∏—è") -->
    <section id="accountsMarketplace" class="info" style="margin-top:18px;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <h2 style="margin:0">–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –∏–∑–¥–∞–Ω–∏—è</h2>
        <button id="openAccListForm" class="btn ghost">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–∑–¥–∞–Ω–∏–µ</button>
      </div>

      <div id="accListingForm" style="display:none;margin-top:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)">
        <div style="display:grid;grid-template-columns:1fr 120px;gap:8px;align-items:center">
          <input id="accListTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–∞–Ω–∏—è / —Å–±–æ—Ä–Ω–∏–∫–∞" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="accListPrice" placeholder="–¶–µ–Ω–∞, ‚ÇΩ" type="number" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="accListGames" placeholder="–¢–µ–º—ã / –∏–≥—Ä—ã (Dota2, Silent Hill...)" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="accListThumb" placeholder="URL –æ–±–ª–æ–∂–∫–∏" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div style="display:flex;gap:8px">
            <button id="createAccListing" class="btn primary">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            <button id="cancelAccListing" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      </div>

      <div id="accMarketGrid" class="product-grid" style="margin-top:12px;">
        <!-- account/author listings injected by JS -->
      </div>
    </section>

    <!-- Reviews -->
    <section id="reviews" class="info" style="margin-top:18px;">
      <h2>–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
      <div id="reviewsGrid" style="margin-top:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px">
        <!-- reviews injected by JS -->
      </div>
    </section>

    <section class="info">
      <h2>–ü–æ—á–µ–º—É –¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç?</h2>
      <ul>
        <li>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∏–∑–¥–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞</li>
        <li>–ì–∞–π–¥—ã, –∞—Ä—Ç–±—É–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–∞–º</li>
        <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏</li>
      </ul>
    </section>
  </main>

  <!-- Cart / Checkout Modal -->
  <div id="cartModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <header class="modal-header">
        <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
        <button id="closeCart" class="btn icon">√ó</button>
      </header>
      <div class="modal-body" id="cartItems">
        <!-- Items -->
      </div>

      <!-- Checkout form (hidden until user proceeds) -->
      <div id="checkoutForm" style="display:none;padding:12px;border-top:1px solid rgba(255,255,255,0.02);">
        <h4 style="margin:6px 0 8px">–î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –∏ –æ–ø–ª–∞—Ç–∞</h4>
        <div style="display:grid;gap:8px">
          <input id="checkoutName" placeholder="–§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="checkoutEmail" placeholder="Email –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div id="paymentMethodInputGroup">
            <label style="display:block;font-size:13px;color:var(--muted);margin:0 0 6px">–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
            <!-- Chips for main methods: Bank Card, PayPal, Qiwi, COD -->
            <div id="mainPaymentMethods" class="payment-chips">
              <button class="payment-chip selected" data-method="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</button>
              <button class="payment-chip" data-method="paypal">PayPal</button>
              <button class="payment-chip" data-method="qiwi">Qiwi</button>
              <button class="payment-chip" data-method="cod">–û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</button>
            </div>

            <!-- Detailed options for 'card' payment, visible by default or when card is selected -->
            <div id="cardSpecificPayments" style="margin-top:10px;display:block;">
              <label style="display:block;font-size:13px;color:var(--muted);margin:0 0 6px">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:</label>
              <div id="cardPaymentMethods" class="payment-chips">
                <button class="payment-chip selected" data-method="card-visa">Visa/Mastercard</button>
                <button class="payment-chip" data-method="card-apple">Apple Pay</button>
                <button class="payment-chip" data-method="card-google">Google Pay</button>
                <button class="payment-chip" data-method="card-yoomoney">–Æ–úoney</button>
              </div>
            </div>
            
            <input id="paymentMethodHidden" type="hidden" value="card-visa">
          </div>
          <input id="paymentData" placeholder="–î–∞–Ω–Ω—ã–µ –æ–ø–ª–∞—Ç—ã (–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã/–ê–∫–∫–∞—É–Ω—Ç)" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button id="cancelCheckout" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
            <button id="confirmPayment" class="btn primary">–û–ø–ª–∞—Ç–∏—Ç—å</button>
          </div>
        </div>
      </div>

      <footer class="modal-footer">
        <div class="total">–ò—Ç–æ–≥–æ: <strong id="cartTotal">0 ‚ÇΩ</strong></div>
        <div class="modal-actions">
          <button id="clearCart" class="btn ghost">–û—á–∏—Å—Ç–∏—Ç—å</button>
          <button id="checkoutBtn" class="btn primary">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
        </div>
      </footer>
    </div>
  </div>

  <!-- Auth Modal -->
  <div id="authModal" class="modal" aria-hidden="true">
    <div class="modal-panel" style="max-width:420px">
      <header class="modal-header">
        <h3 id="authTitle">–í–æ–π—Ç–∏</h3>
        <button id="closeAuth" class="btn icon">√ó</button>
      </header>
      <div class="modal-body" style="padding:12px;display:grid;gap:8px">
        <input id="authName" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è / email" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <input id="authPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button id="toRegister" class="btn ghost">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          <button id="submitAuth" class="btn primary">–í–æ–π—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div id="chatModal" class="modal" aria-hidden="true">
    <div class="modal-panel" style="max-width:500px;display:flex;flex-direction:column;height:70vh;padding:8px">
      <header class="modal-header">
        <h3>–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
        <button id="closeChat" class="btn icon">√ó</button>
      </header>
      <div id="chatBody" class="modal-body" style="padding:8px;flex:1;display:flex;flex-direction:column;gap:8px;overflow:auto;background:transparent">
        <!-- messages -->
      </div>
      <footer style="display:flex;gap:8px;align-items:center;padding-top:6px">
        <input id="chatInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex:1;padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <button id="sendChat" class="btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </footer>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>
  <script type="module" src="/app/static/js/app.js"></script>
</body>
</html>
